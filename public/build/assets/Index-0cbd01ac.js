import{t as B,r as o,o as u,k as g,l as e,d as k,u as L,m as M,q as N,z as V,e as i,f as a,b,p as R,x as m,y as r,a as D,A as O,F as w}from"./app-44623493.js";const U=k("div",{class:"grid grid-cols-3 gap-6"},[k("div",{class:"col-span-3 sm:col-span-1"})],-1),q={__name:"Filter",emits:["hide"],setup(n,{emit:_}){const d={},f=B({...d});return(h,v)=>{const c=o("FilterForm");return u(),g(c,{"init-form":d,form:f,onHide:v[0]||(v[0]=y=>_("hide"))},{default:e(()=>[U]),_:1},8,["form"])}}},x={class:"text-xs"},z={name:"EmployeeRecordList"},J=Object.assign(z,{props:{employee:{type:Object,default(){return{}}}},setup(n){const _=L(),d=M(),f=N("emitter");let h=[];const v="employee/record/",c=V(!1),y=B({}),E=l=>{Object.assign(y,l)};return(l,s)=>{const I=o("PageHeaderAction"),H=o("PageHeader"),F=o("ParentTransition"),p=o("DataCell"),$=o("FloatingMenuItem"),P=o("FloatingMenu"),S=o("DataRow"),T=o("BaseButton"),j=o("DataTable"),A=o("ListItem");return u(),g(A,{"init-url":v,uuid:i(_).params.uuid,onSetItems:E},{header:e(()=>[n.employee.uuid?(u(),g(H,{key:0,title:l.$trans("employee.record.record"),navs:[{label:l.$trans("employee.employee"),path:"Employee"},{label:n.employee.contact.name,path:{name:"EmployeeShow",params:{uuid:n.employee.uuid}}}]},{default:e(()=>[a(I,{url:`employees/${n.employee.uuid}/records/`,name:"EmployeeRecord",title:l.$trans("employee.record.record"),actions:i(h),"dropdown-actions":["print","pdf","excel"],onToggleFilter:s[0]||(s[0]=t=>c.value=!c.value)},null,8,["url","title","actions"])]),_:1},8,["title","navs"])):b("",!0)]),filter:e(()=>[a(F,{appear:"",visibility:c.value},{default:e(()=>[a(q,{onRefresh:s[1]||(s[1]=t=>i(f).emit("listItems")),onHide:s[2]||(s[2]=t=>c.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(F,{appear:"",visibility:!0},{default:e(()=>[a(j,{header:y.headers,meta:y.meta,module:"employee.record",onRefresh:s[4]||(s[4]=t=>i(f).emit("listItems"))},{actionButton:e(()=>[i(R)("employment-record:manage")&&!n.employee.lastRecord.endDate&&!n.employee.isDefault?(u(),g(T,{key:0,onClick:s[3]||(s[3]=t=>i(d).push({name:"EmployeeRecordCreate"}))},{default:e(()=>[m(r(l.$trans("global.add",{attribute:l.$trans("employee.record.record")})),1)]),_:1})):b("",!0)]),default:e(()=>[(u(!0),D(w,null,O(y.data,t=>(u(),g(S,{key:t.uuid},{default:e(()=>[a(p,{name:"startDate"},{default:e(()=>[m(r(t.period)+" ",1),k("div",x,r(t.duration),1)]),_:2},1024),a(p,{name:"department"},{default:e(()=>[m(r(t.department.name),1)]),_:2},1024),a(p,{name:"designation"},{default:e(()=>[m(r(t.designation.name),1)]),_:2},1024),a(p,{name:"branch"},{default:e(()=>[m(r(t.branch.name),1)]),_:2},1024),a(p,{name:"employmentStatus"},{default:e(()=>[m(r(t.employmentStatus.name),1)]),_:2},1024),a(p,{name:"action"},{default:e(()=>[a(P,null,{default:e(()=>[a($,{icon:"fas fa-arrow-circle-right",onClick:C=>i(d).push({name:"EmployeeRecordShow",params:{uuid:n.employee.uuid,muuid:t.uuid}})},{default:e(()=>[m(r(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),i(R)("employment-record:manage")&&!n.employee.isDefault?(u(),D(w,{key:0},[a($,{icon:"fas fa-edit",onClick:C=>i(d).push({name:"EmployeeRecordEdit",params:{uuid:n.employee.uuid,muuid:t.uuid}})},{default:e(()=>[m(r(l.$trans("general.edit")),1)]),_:2},1032,["onClick"]),a($,{icon:"fas fa-trash",onClick:C=>i(f).emit("deleteItem",{uuid:n.employee.uuid,moduleUuid:t.uuid})},{default:e(()=>[m(r(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])],64)):b("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1},8,["uuid"])}}});export{J as default};
