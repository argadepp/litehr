import{u as P,s as N,t as H,r as i,o as p,k as D,l as y,d as m,e as o,x as B,y as c,b as T,f as d,a as _,F as k,A as E,n as j,L as C}from"./app-44623493.js";const I={class:"grid grid-cols-3 gap-6"},R={class:"col-span-3 sm:col-span-1"},q={class:"col-span-3 sm:col-span-1"},w={class:"col-span-3 sm:col-span-1"},z={key:0,class:"mt-4 grid grid-cols-3 gap-3"},G={key:0},J={class:"mt-4 grid grid-cols-3 gap-3"},K={class:"col-span-3"},M={name:"PayrollSalaryStructureForm"},Q=Object.assign(M,{setup(L){const v=P(),s={employee:"",salaryTemplate:"",effectiveDate:"",records:[],description:""},$="payroll/salaryStructure/",l=N($),r=H({...s}),n=H({employee:"",salaryTemplate:"",isLoaded:!v.params.uuid}),F=t=>{var b,g,V,S;let a=t.records.filter(u=>u.enableUserInput),f=[];a.forEach(u=>{f.push({uuid:u.uuid,unit:u.unit,payHead:u.payHead,amount:u.amount.value})}),Object.assign(s,{employee:(b=t.employee)==null?void 0:b.uuid,salaryTemplate:(g=t.template)==null?void 0:g.uuid,effectiveDate:t.effectiveDate.value,records:f,description:t.description}),Object.assign(r,C(s)),n.employee=(V=t.employee)==null?void 0:V.uuid,n.salaryTemplate=(S=t.template)==null?void 0:S.uuid,n.isLoaded=!0},O=t=>{r.records=[],t.records.forEach(a=>{a.enableUserInput&&r.records.push({uuid:a.uuid,unit:a.unit,payHead:a.payHead,amount:""})})},A=t=>{r.records=[]};return(t,a)=>{const f=i("BaseSelectSearch"),b=i("DatePicker"),g=i("BaseLabel"),V=i("BaseInput"),S=i("BaseTextarea"),u=i("FormAction");return p(),D(u,{"init-url":$,"init-form":s,form:r,"set-form":F,redirect:"PayrollSalaryStructure"},{default:y(()=>[m("div",I,[m("div",R,[n.isLoaded?(p(),D(f,{key:0,name:"employee",label:t.$trans("global.select",{attribute:t.$trans("employee.employee")}),modelValue:r.employee,"onUpdate:modelValue":a[0]||(a[0]=e=>r.employee=e),error:o(l).employee,"onUpdate:error":a[1]||(a[1]=e=>o(l).employee=e),"value-prop":"uuid","init-search":n.employee,"additional-search-query":{self:0},"search-action":"employee/list"},{selectedOption:y(e=>[B(c(e.value.name)+" ("+c(e.value.codeNumber)+") ",1)]),listOption:y(e=>[B(c(e.option.name)+" ("+c(e.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","error","init-search"])):T("",!0)]),m("div",q,[n.isLoaded?(p(),D(f,{key:0,name:"salaryTemplate",label:t.$trans("global.select",{attribute:t.$trans("payroll.salary_template.salary_template")}),modelValue:r.salaryTemplate,"onUpdate:modelValue":a[2]||(a[2]=e=>r.salaryTemplate=e),error:o(l).salaryTemplate,"onUpdate:error":a[3]||(a[3]=e=>o(l).salaryTemplate=e),"value-prop":"uuid","init-search":n.salaryTemplate,"additional-search-query":{record:1},"search-action":"payroll/salaryTemplate/list",onSelected:O,onRemoved:A},null,8,["label","modelValue","error","init-search"])):T("",!0)]),m("div",w,[d(b,{modelValue:r.effectiveDate,"onUpdate:modelValue":a[4]||(a[4]=e=>r.effectiveDate=e),name:"effectiveDate",label:t.$trans("payroll.salary_structure.props.effective_date"),"no-clear":"",error:o(l).effectiveDate,"onUpdate:error":a[5]||(a[5]=e=>o(l).effectiveDate=e)},null,8,["modelValue","label","error"])])]),r.records.length>0?(p(),_("div",z,[(p(!0),_(k,null,E(r.records,(e,h)=>(p(),_("div",{key:e.uuid,class:"col-span-3 sm:col-span-1"},[d(g,{class:j({"text-success":e.payHead.type=="earning","text-danger":e.payHead.type=="deduction"})},{default:y(()=>[B(c(e.payHead.name)+" "+c(e.payHead.code)+" ",1),e.unit?(p(),_("span",G,"("+c(e.unit.label)+")",1)):T("",!0)]),_:2},1032,["class"]),d(V,{currency:"",type:"text",modelValue:e.amount,"onUpdate:modelValue":U=>e.amount=U,name:`records.${h}.amount`,placeholder:t.$trans("payroll.salary_structure.props.amount"),error:o(l)[`records.${h}.amount`],"onUpdate:error":U=>o(l)[`records.${h}.amount`]=U},null,8,["modelValue","onUpdate:modelValue","name","placeholder","error","onUpdate:error"])]))),128))])):T("",!0),m("div",J,[m("div",K,[d(S,{modelValue:r.description,"onUpdate:modelValue":a[6]||(a[6]=e=>r.description=e),name:"description",label:t.$trans("payroll.salary_structure.props.description"),error:o(l).description,"onUpdate:error":a[7]||(a[7]=e=>o(l).description=e)},null,8,["modelValue","label","error"])])])]),_:1},8,["form"])}}}),W={name:"PayrollSalaryStructureAction"},Y=Object.assign(W,{setup(L){const v=P();return(s,$)=>{const l=i("PageHeaderAction"),r=i("PageHeader"),n=i("ParentTransition");return p(),_(k,null,[d(r,{title:s.$trans(o(v).meta.trans,{attribute:s.$trans(o(v).meta.label)}),navs:[{label:s.$trans("payroll.payroll"),path:"Payroll"},{label:s.$trans("payroll.salary_structure.salary_structure"),path:"PayrollSalaryStructureList"}]},{default:y(()=>[d(l,{name:"PayrollSalaryStructure",title:s.$trans("payroll.salary_structure.salary_structure"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),d(n,{appear:"",visibility:!0},{default:y(()=>[d(Q)]),_:1})],64)}}});export{Y as default};
