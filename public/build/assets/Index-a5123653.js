import{u as E,m as F,h as j,p as B,z,c as W,t as U,v as G,r as n,o as e,a as g,f as o,l as t,e as c,F as y,M as I,k as l,x as u,y as i,b as h,A as w,d as T,n as J}from"./app-44623493.js";import{_ as K}from"./Filter-159905ee.js";const Q={name:"AttendanceList"},tt=Object.assign(Q,{setup(X){const m=E(),P=F(),V=j();let D=[];B("attendance:config")&&D.unshift("config");let A=[];B("attendance:export")&&(A=["print","pdf","excel"]);const $="attendance/",_=z(!1),M=W(()=>I(m.query.dayWise)),f=U({headers:[],data:[],meta:{total:0}}),v=async()=>{_.value=!0,await V.dispatch($+"listAttendance",{params:m.query}).then(s=>{_.value=!1,Object.assign(f,s)}).catch(s=>{_.value=!1})};return G(async()=>{m.query.date&&await v()}),(s,C)=>{const N=n("BaseButton"),R=n("PageHeaderAction"),S=n("PageHeader"),L=n("ParentTransition"),H=n("BaseDataView"),k=n("DataCell"),b=n("TextMuted"),O=n("DataRow"),q=n("DataTable"),x=n("BaseCard");return e(),g(y,null,[o(S,{title:s.$trans(c(m).meta.label),navs:[]},{default:t(()=>[o(R,{url:"attendance/",name:"Attendance",title:s.$trans("attendance.attendance"),actions:c(D),"dropdown-actions":c(A)},{default:t(()=>[c(B)("attendance:mark")?(e(),l(N,{key:0,design:"white",onClick:C[0]||(C[0]=a=>c(P).push({name:"AttendanceMark"}))},{default:t(()=>[u(i(s.$trans("attendance.mark")),1)]),_:1})):h("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title"]),o(L,{appear:"",visibility:!0},{default:t(()=>[o(K,{onAfterFilter:v,"init-url":$,"date-as":"month","day-wise-filter":""})]),_:1}),o(L,{appear:"",visibility:!0},{default:t(()=>[o(x,{"no-padding":"","no-content-padding":"","is-loading":_.value},{default:t(()=>[o(q,{header:f.headers,meta:f.meta,module:"attendance",onRefresh:v},{default:t(()=>[(e(!0),g(y,null,w(f.data,a=>(e(),l(O,{key:a.uuid},{default:t(()=>[o(k,{name:"employee"},{default:t(()=>[o(H,{label:a.name+" ("+a.codeNumber+")",revert:""},{default:t(()=>[u(i(a.designation)+" "+i(a.branch),1)]),_:2},1032,["label"])]),_:2},1024),M.value?(e(!0),g(y,{key:0},w(a.attendances,(p,d)=>(e(),l(k,{name:`day${d}`},{default:t(()=>[T("span",{class:J(["font-semibold","text-xs","text-"+p.color])},i(p.code),3)]),_:2},1032,["name"]))),256)):(e(!0),g(y,{key:1},w(a.summary,(p,d)=>(e(),l(k,{align:"center",name:`type_${d}`},{default:t(()=>[T("span",null,i(p),1),d=="Late"?(e(),l(b,{key:0,class:"ml-1"},{default:t(()=>{var r;return[u(" ("+i(((r=a.additionalSummary)==null?void 0:r.totalLateDuration)+s.$trans("list.durations.m_short"))+") ",1)]}),_:2},1024)):h("",!0),d=="EarlyLeaving"?(e(),l(b,{key:1,class:"ml-1"},{default:t(()=>{var r;return[u(" ("+i(((r=a.additionalSummary)==null?void 0:r.totalEarlyLeavingDuration)+s.$trans("list.durations.m_short"))+") ",1)]}),_:2},1024)):h("",!0),d=="Overtime"?(e(),l(b,{key:2,class:"ml-1"},{default:t(()=>{var r;return[u(" ("+i(((r=a.additionalSummary)==null?void 0:r.totalOvertimeDuration)+s.$trans("list.durations.m_short"))+") ",1)]}),_:2},1024)):h("",!0)]),_:2},1032,["name"]))),256))]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1},8,["is-loading"])]),_:1})],64)}}});export{tt as default};
