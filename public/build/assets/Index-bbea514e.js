import{h as R,m as T,t as A,z as y,c as V,v as z,r as v,o as i,k as D,l as p,d as o,f as r,a as m,y as f,b as $,A as P,F as g,x as E}from"./app-44623493.js";const I={class:"bg-secondary w-full rounded-lg px-8 py-4"},S={key:0,class:"text-primary text-center text-xl"},W={key:1,class:"text-dark-primary text-center"},M={class:"mb-4 text-sm font-medium"},j={class:"mb-4 grid grid-cols-6 gap-6"},G={class:"col-span-6 sm:col-span-2"},J={class:"grid grid-cols-6 gap-6"},K={class:"col-span-6 sm:col-span-3"},O={class:"col-span-6 sm:col-span-3"},Q={class:"col-span-6 sm:col-span-2"},X={class:"col-span-6 sm:col-span-2"},Y={class:"col-span-6 sm:col-span-2"},Z={class:"grid grid-cols-6 gap-6"},ee={class:"col-span-6 sm:col-span-3"},se={class:"col-span-6 sm:col-span-3"},te={class:"col-span-6 sm:col-span-2"},ae={class:"col-span-6 sm:col-span-2"},le={class:"col-span-6 sm:col-span-2"},de={__name:"Index",setup(oe){const u=R(),C=T(),a=A({dbHost:"localhost",dbPort:"3306",dbName:"",dbUsername:"",dbPassword:"",name:"",email:"",username:"",password:"",passwordConfirmation:""}),n=y(null),B=V(()=>u.getters["setup/install/getPreRequisites"]),b=V(()=>u.getters["setup/install/getApp"]),l=V(()=>u.getters["setup/install/getFormErrors"]);y(null),z(async()=>{n.value=!0,await u.dispatch("setup/install/fetchPreRequisite",{}).then(t=>{n.value=!1}).catch(t=>{n.value=!1})});const N=()=>{},_=()=>{},x=()=>u.getters["setup/install/hasValidPreRequisite"],k=()=>w("db"),F=()=>w("user"),w=t=>(n.value=!0,u.dispatch("setup/install/validate",{option:t,form:a}).then(e=>(n.value=!1,!0)).catch(e=>(n.value=!1,!1))),L=async()=>{n.value=!0,await u.dispatch("setup/install/finish",{form:a}).then(()=>{n.value=!1,C.push({name:"Login"})}).catch(t=>{n.value=!1})};return(t,e)=>{const h=v("BaseAlert"),c=v("TabContent"),d=v("BaseInput"),H=v("FormWizard"),q=v("BaseLoader");return i(),D(q,{"is-loading":n.value},{default:p(()=>[o("div",I,[r(H,{onComplete:L,"next-button-text":t.$trans("setup.install.next"),"previous-button-text":t.$trans("setup.install.previous"),"finish-button-text":t.$trans("setup.install.finish")},{header:p(()=>[b.value.title?(i(),m("p",S,f(b.value.title+" "+b.value.version),1)):$("",!0),b.value.subtitle?(i(),m("p",W,f(b.value.subtitle),1)):$("",!0)]),default:p(()=>[r(c,{title:t.$trans("setup.install.step",{attribute:1}),description:t.$trans("setup.install.prerequisite_check"),"before-change":x},{default:p(()=>[(i(!0),m(g,null,P(B.value,s=>(i(),m(g,null,[o("h6",M,f(s.title),1),o("div",j,[(i(!0),m(g,null,P(s.items,U=>(i(),m("div",G,[r(h,{design:U.type},{default:p(()=>[E(f(U.message),1)]),_:2},1032,["design"])]))),256))])],64))),256))]),_:1},8,["title","description"]),r(c,{title:t.$trans("setup.install.step",{attribute:2}),description:t.$trans("setup.install.database_setup"),"before-change":k,"after-load":N},{default:p(()=>[o("div",J,[o("div",K,[r(d,{type:"text",modelValue:a.dbHost,"onUpdate:modelValue":e[0]||(e[0]=s=>a.dbHost=s),name:"dbHost",label:t.$trans("setup.install.props.db_host"),error:l.value.dbHost,"onUpdate:error":e[1]||(e[1]=s=>l.value.dbHost=s),autofocus:""},null,8,["modelValue","label","error"])]),o("div",O,[r(d,{type:"number",modelValue:a.dbPort,"onUpdate:modelValue":e[2]||(e[2]=s=>a.dbPort=s),name:"dbPort",label:t.$trans("setup.install.props.db_port"),error:l.value.dbPort,"onUpdate:error":e[3]||(e[3]=s=>l.value.dbPort=s)},null,8,["modelValue","label","error"])]),o("div",Q,[r(d,{type:"text",modelValue:a.dbName,"onUpdate:modelValue":e[4]||(e[4]=s=>a.dbName=s),name:"dbName",label:t.$trans("setup.install.props.db_name"),error:l.value.dbName,"onUpdate:error":e[5]||(e[5]=s=>l.value.dbName=s)},null,8,["modelValue","label","error"])]),o("div",X,[r(d,{type:"text",modelValue:a.dbUsername,"onUpdate:modelValue":e[6]||(e[6]=s=>a.dbUsername=s),name:"dbUsername",label:t.$trans("setup.install.props.db_username"),error:l.value.dbUsername,"onUpdate:error":e[7]||(e[7]=s=>l.value.dbUsername=s)},null,8,["modelValue","label","error"])]),o("div",Y,[r(d,{type:"password",modelValue:a.dbPassword,"onUpdate:modelValue":e[8]||(e[8]=s=>a.dbPassword=s),name:"dbPassword",label:t.$trans("setup.install.props.db_password"),error:l.value.dbPassword,"onUpdate:error":e[9]||(e[9]=s=>l.value.dbPassword=s)},null,8,["modelValue","label","error"])])])]),_:1},8,["title","description"]),r(c,{title:t.$trans("setup.install.step",{attribute:3}),description:t.$trans("setup.install.account_setup"),"before-change":F,"after-load":_},{default:p(()=>[o("div",Z,[o("div",ee,[r(d,{type:"text",modelValue:a.name,"onUpdate:modelValue":e[10]||(e[10]=s=>a.name=s),name:"name",label:t.$trans("setup.install.props.name"),error:l.value.name,"onUpdate:error":e[11]||(e[11]=s=>l.value.name=s)},null,8,["modelValue","label","error"])]),o("div",se,[r(d,{type:"email",modelValue:a.email,"onUpdate:modelValue":e[12]||(e[12]=s=>a.email=s),name:"email",label:t.$trans("setup.install.props.email"),error:l.value.email,"onUpdate:error":e[13]||(e[13]=s=>l.value.email=s),autofocus:""},null,8,["modelValue","label","error"])]),o("div",te,[r(d,{type:"text",modelValue:a.username,"onUpdate:modelValue":e[14]||(e[14]=s=>a.username=s),name:"username",label:t.$trans("setup.install.props.username"),error:l.value.username,"onUpdate:error":e[15]||(e[15]=s=>l.value.username=s)},null,8,["modelValue","label","error"])]),o("div",ae,[r(d,{type:"password",modelValue:a.password,"onUpdate:modelValue":e[16]||(e[16]=s=>a.password=s),name:"password",label:t.$trans("setup.install.props.password"),error:l.value.password,"onUpdate:error":e[17]||(e[17]=s=>l.value.password=s)},null,8,["modelValue","label","error"])]),o("div",le,[r(d,{type:"password",modelValue:a.passwordConfirmation,"onUpdate:modelValue":e[18]||(e[18]=s=>a.passwordConfirmation=s),name:"passwordConfirmation",label:t.$trans("setup.install.props.password_confirmation"),error:l.value.passwordConfirmation,"onUpdate:error":e[19]||(e[19]=s=>l.value.passwordConfirmation=s)},null,8,["modelValue","label","error"])])])]),_:1},8,["title","description"])]),_:1},8,["next-button-text","previous-button-text","finish-button-text"])])]),_:1},8,["is-loading"])}}};export{de as default};
