import{u as q,t as C,v as O,r,o as c,k as y,l as t,d as g,f as s,b as h,m as z,q as G,p as D,z as J,e as p,x as b,y as i,a as j,A as E,F as I}from"./app-44623493.js";const K={class:"grid grid-cols-3 gap-6"},Q={class:"col-span-3 sm:col-span-1"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={class:"col-span-3 sm:col-span-1"},x={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ae={__name:"Filter",emits:["hide"],setup(L,{emit:S}){const f=q(),$={codeNumber:"",name:"",joiningStartDate:"",joiningEndDate:"",leavingStartDate:"",leavingEndDate:"",department:"",designation:"",branch:"",employmentStatus:""},n=C({...$}),d=C({department:"",designation:"",branch:"",employmentStatus:"",isLoaded:!(f.query.department||f.query.designation||f.query.branch||f.query.employmentStatus)});return O(async()=>{d.department=f.query.department,d.designation=f.query.designation,d.branch=f.query.branch,d.employmentStatus=f.query.employmentStatus,d.isLoaded=!0}),(m,a)=>{const _=r("BaseInput"),V=r("DatePicker"),u=r("BaseSelectSearch"),l=r("FilterForm");return c(),y(l,{"init-form":$,form:n,onHide:a[10]||(a[10]=o=>S("hide"))},{default:t(()=>[g("div",K,[g("div",Q,[s(_,{type:"text",modelValue:n.codeNumber,"onUpdate:modelValue":a[0]||(a[0]=o=>n.codeNumber=o),name:"codeNumber",label:m.$trans("employee.props.code_number")},null,8,["modelValue","label"])]),g("div",W,[s(_,{type:"text",modelValue:n.name,"onUpdate:modelValue":a[1]||(a[1]=o=>n.name=o),name:"name",label:m.$trans("contact.props.name")},null,8,["modelValue","label"])]),g("div",X,[s(V,{start:n.joiningStartDate,"onUpdate:start":a[2]||(a[2]=o=>n.joiningStartDate=o),end:n.joiningEndDate,"onUpdate:end":a[3]||(a[3]=o=>n.joiningEndDate=o),name:"joiningDateBetween",as:"range",label:m.$trans("global.date_between",{attribute:m.$trans("employee.props.joining_date")})},null,8,["start","end","label"])]),g("div",Y,[s(V,{start:n.leavingStartDate,"onUpdate:start":a[4]||(a[4]=o=>n.leavingStartDate=o),end:n.leavingEndDate,"onUpdate:end":a[5]||(a[5]=o=>n.leavingEndDate=o),name:"leavingDateBetween",as:"range",label:m.$trans("global.date_between",{attribute:m.$trans("employee.props.leaving_date")})},null,8,["start","end","label"])]),g("div",Z,[d.isLoaded?(c(),y(u,{key:0,name:"department",label:m.$trans("global.select",{attribute:m.$trans("company.department.department")}),modelValue:n.department,"onUpdate:modelValue":a[6]||(a[6]=o=>n.department=o),"value-prop":"uuid","init-search":d.department,"search-action":"company/department/list"},null,8,["label","modelValue","init-search"])):h("",!0)]),g("div",x,[d.isLoaded?(c(),y(u,{key:0,name:"designation",label:m.$trans("global.select",{attribute:m.$trans("company.designation.designation")}),modelValue:n.designation,"onUpdate:modelValue":a[7]||(a[7]=o=>n.designation=o),"value-prop":"uuid","init-search":d.designation,"search-action":"company/designation/list"},null,8,["label","modelValue","init-search"])):h("",!0)]),g("div",ee,[d.isLoaded?(c(),y(u,{key:0,name:"branch",label:m.$trans("global.select",{attribute:m.$trans("company.branch.branch")}),modelValue:n.branch,"onUpdate:modelValue":a[8]||(a[8]=o=>n.branch=o),"value-prop":"uuid","init-search":d.branch,"search-action":"company/branch/list"},null,8,["label","modelValue","init-search"])):h("",!0)]),g("div",te,[d.isLoaded?(c(),y(u,{key:0,name:"employmentStatus",label:m.$trans("global.select",{attribute:m.$trans("employee.employment_status.employment_status")}),modelValue:n.employmentStatus,"onUpdate:modelValue":a[9]||(a[9]=o=>n.employmentStatus=o),"value-prop":"uuid","init-search":d.employmentStatus,"search-action":"option/list","additional-search-query":{type:"employment_status"}},null,8,["label","modelValue","init-search"])):h("",!0)])])]),_:1},8,["form"])}}},ne={class:"grid grid-cols-1 gap-4 px-4 pt-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"},oe={class:""},se={class:"text-xs text-gray-500"},le={class:"truncate text-sm text-gray-500"},ie={class:"text-sm text-gray-500"},re={name:"EmployeeList"},me=Object.assign(re,{setup(L){const S=q(),f=z(),$=G("emitter");let n=["filter","view"];D("employee:create")&&n.unshift("create"),D("employee:config")&&n.unshift("config");let d=[];D("employee:export")&&(d=["print","pdf","excel"]);const m="employee/",a=J(!1),_=C({}),V=u=>{Object.assign(_,u)};return(u,l)=>{const o=r("PageHeaderAction"),N=r("PageHeader"),w=r("ParentTransition"),U=r("CardView"),P=r("Pagination"),B=r("BaseButton"),R=r("CardList"),v=r("DataCell"),F=r("FloatingMenuItem"),A=r("FloatingMenu"),H=r("DataRow"),T=r("DataTable"),M=r("ListItem");return c(),y(M,{"init-url":m,onSetItems:V},{header:t(()=>[s(N,{title:u.$trans("employee.employee"),navs:[]},{default:t(()=>[s(o,{url:"employees/",name:"Employee",title:u.$trans("employee.employee"),actions:p(n),"dropdown-actions":p(d),onToggleFilter:l[0]||(l[0]=e=>a.value=!a.value),onRefresh:l[1]||(l[1]=e=>p($).emit("listItems"))},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title"])]),filter:t(()=>[s(w,{appear:"",visibility:a.value},{default:t(()=>[s(ae,{onRefresh:l[2]||(l[2]=e=>p($).emit("listItems")),onHide:l[3]||(l[3]=e=>a.value=!1)})]),_:1},8,["visibility"])]),default:t(()=>[p(S).query.view!="list"?(c(),y(w,{key:0,appear:"",visibility:!0},{default:t(()=>[s(R,{header:_.headers,meta:_.meta,module:"employee"},{actionButton:t(()=>[p(D)("employee:create")?(c(),y(B,{key:0,onClick:l[5]||(l[5]=e=>p(f).push({name:"EmployeeCreate"}))},{default:t(()=>[b(i(u.$trans("global.add",{attribute:u.$trans("employee.employee")})),1)]),_:1})):h("",!0)]),default:t(()=>[g("div",ne,[(c(!0),j(I,null,E(_.data,e=>(c(),y(U,{key:e.uuid,"img-src":e.photo,path:{name:"EmployeeShow",params:{uuid:e.uuid}}},{title:t(()=>[b(i(e.name)+" ",1),g("span",oe,"("+i(e.codeNumber)+")",1)]),default:t(()=>{var k;return[g("p",se,i((k=e.age)==null?void 0:k.short),1),g("p",le,i(e.designation)+" @ "+i(e.branch),1),g("p",ie,i(e.period),1)]}),_:2},1032,["img-src","path"]))),128))]),g("div",null,[s(P,{"card-view":"",meta:_.meta,onRefresh:l[4]||(l[4]=e=>p($).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"])]),_:1})):h("",!0),p(S).query.view=="list"?(c(),y(w,{key:1,appear:"",visibility:!0},{default:t(()=>[s(T,{header:_.headers,meta:_.meta,module:"employee",onRefresh:l[7]||(l[7]=e=>p($).emit("listItems"))},{actionButton:t(()=>[p(D)("employee:create")?(c(),y(B,{key:0,onClick:l[6]||(l[6]=e=>p(f).push({name:"EmployeeCreate"}))},{default:t(()=>[b(i(u.$trans("global.add",{attribute:u.$trans("employee.employee")})),1)]),_:1})):h("",!0)]),default:t(()=>[(c(!0),j(I,null,E(_.data,e=>(c(),y(H,{key:e.uuid},{default:t(()=>[s(v,{name:"codeNumber"},{default:t(()=>[b(i(e.codeNumber),1)]),_:2},1024),s(v,{name:"name"},{default:t(()=>[b(i(e.name),1)]),_:2},1024),s(v,{name:"joiningDate"},{default:t(()=>[b(i(e.joiningDate.formatted),1)]),_:2},1024),s(v,{name:"branch"},{default:t(()=>[b(i(e.employmentStatus),1)]),_:2},1024),s(v,{name:"department"},{default:t(()=>[b(i(e.department),1)]),_:2},1024),s(v,{name:"designation"},{default:t(()=>[b(i(e.designation),1)]),_:2},1024),s(v,{name:"branch"},{default:t(()=>[b(i(e.branch),1)]),_:2},1024),s(v,{name:"createdAt"},{default:t(()=>[b(i(e.createdAt.formatted),1)]),_:2},1024),s(v,{name:"action"},{default:t(()=>[s(A,null,{default:t(()=>[s(F,{icon:"fas fa-arrow-circle-right",onClick:k=>p(f).push({name:"EmployeeShow",params:{uuid:e.uuid}})},{default:t(()=>[b(i(u.$trans("general.show")),1)]),_:2},1032,["onClick"]),p(D)("employee:delete")&&!e.isDefault?(c(),y(F,{key:0,icon:"fas fa-trash",onClick:k=>p($).emit("deleteItem",{uuid:e.uuid})},{default:t(()=>[b(i(u.$trans("general.delete")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})):h("",!0)]),_:1})}}});export{me as default};
